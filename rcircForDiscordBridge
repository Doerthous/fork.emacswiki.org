I hate Discord very much and I don't advocate for using it but if you are in a channel that uses [https://github.com/reactiflux/discord-irc this fantastic irc bridge], you might find the following snippets useful. There are "personal" bridges too, using libpurple, this is not for that. This is for when there's a bot in a channel on a normal IRC network that relays what the people on the Discord say, and vice versa.

The code on this pages advises [[rcirc]].

The first one translate the senders for rcirc-print. Change "BridgeName" to the name of your bridge bot.

<pre>
(defun bridge-list (args)
  (if (string= "BridgeName" (cadr args))
      (destructuring-bind (process sender response target text activity)
	  args
	(string-match "<\\([^>][^>]*\\)> \\(.*\\)" text)
	(list process (match-string 1 text) response target (match-string 2 text) activity))
      args))

(advice-add 'rcirc-print :filter-args #'bridge-list)
</pre>

If you have colored nicks on in your bridge's conf file, '''which is the default''', you should instead search for <code>"<.[0-9]*\\([^>][^>]*\\).> \\(.*\\)"</code> so be aware of that.


And here is one that blackens spoiler tags. I guess these spoiler tags are useful even without the bridge.

<pre>
(defun discord-spoilers (sender response)
  (while (re-search-forward "||[^|][^|]*||" nil t)
    (replace-match (rcirc-facify (match-string 0) '(:background "black" :foreground "black")))))

(add-hook 'rcirc-markup-text-functions 'discord-spoilers)
</pre>

Here is a variant that rot13's them instead:
<pre>
(defun discord-spoilers (sender response)
  (while (re-search-forward "||[^|][^|]*||" nil t)
    (replace-match (rot13 (match-string 0)))))

(add-hook 'rcirc-markup-text-functions 'discord-spoilers)
</pre>
